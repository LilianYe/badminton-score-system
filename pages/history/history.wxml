<view class="container">
  <view class="header">
    <text class="title">Game History</text>
  </view>
  
  <!-- Date filter -->
  <view class="date-filter">
    <picker mode="date" value="{{selectedDate}}" bindchange="onDateSelect">
      <view class="date-picker">
        <text>{{selectedDate ? 'Date: ' + selectedDate : 'Filter by date'}}</text>
        <view class="picker-arrow"></view>
      </view>
    </picker>
    <view wx:if="{{selectedDate}}" class="clear-filter" bindtap="clearDateFilter">
      <text>Clear filter</text>
    </view>
  </view>
  
  <!-- Loading indicator -->
  <view wx:if="{{isLoading}}" class="loading-container">
    <text>Loading History...</text>
  </view>
  
  <!-- Empty state -->
  <view wx:elif="{{isEmpty}}" class="empty-container">
    <text>No completed matches found.</text>
  </view>
  
  <!-- Game history list -->
  <block wx:else>
    <view class="match-list">
      <view wx:for="{{completedMatches}}" wx:key="MatchId" class="match-card">
        <view class="match-header">
          <text class="match-time">{{item.formattedCompleteTime}}</text>
          <view class="result-badge {{item.result}}">{{item.result}}</view>
        </view>
        <view class="teams-container">
          <view class="team">
            <text class="player-name">{{item.PlayerNameA1}}</text>
            <text wx:if="{{item.PlayerNameA2}}" class="player-name">{{item.PlayerNameA2}}</text>
          </view>
          <view class="score">
            <text>{{item.ScoreA}} - {{item.ScoreB}}</text>
          </view>
          <view class="team">
            <text class="player-name">{{item.PlayerNameB1}}</text>
            <text wx:if="{{item.PlayerNameB2}}" class="player-name">{{item.PlayerNameB2}}</text>
          </view>
        </view>
        <view class="match-footer">
          <text>Referee: {{item.RefereeName}}</text>
        </view>
      </view>
    </view>
  </block>
</view>