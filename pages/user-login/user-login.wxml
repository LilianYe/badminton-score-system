<view class="container">
  <view class="login-card">
    <view class="app-title">Badminton Score System</view>
    
    <!-- Login Step -->
    <view wx:if="{{!showRegistration}}">
      <view class="welcome-text">Welcome! Please login with WeChat to continue.</view>
      
      <view class="login-section">
        <button 
          bindtap="handleWeChatLogin" 
          class="wechat-login-btn" 
          type="primary"
          loading="{{isLoading}}"
        >
          <text class="wechat-icon">ðŸ“±</text>
          Login with WeChat
        </button>
      </view>
      
      <view class="note">
        <text>We'll use your WeChat profile to personalize your badminton experience.</text>
      </view>
    </view>
    
    <!-- Registration Step -->
    <view wx:else class="registration">
      <view class="welcome-text">Welcome to Badminton Score System!</view>
      <view class="subtitle">Please complete your registration to continue.</view>
      
      <view class="avatar-section" wx:if="{{wechatUserInfo}}">
        <image class="avatar" src="{{wechatUserInfo.avatarUrl}}" mode="aspectFill"></image>
        <text class="nickname">{{wechatUserInfo.nickName}}</text>
      </view>
      
      <!-- Info Source Toggle -->
      <view class="info-source-section">
        <text class="info-source-title">Use WeChat Information</text>
        <switch 
          checked="{{useWechatInfo}}" 
          bindchange="toggleInfoSource"
          color="#007AFF"
        />
      </view>
      
      <!-- Nickname Input Section -->
      <view class="nickname-section">
        <text class="nickname-label">Nickname</text>
        <input 
          class="nickname-input" 
          value="{{nickname}}" 
          bindinput="onNicknameInput"
          placeholder="Enter your nickname"
          maxlength="20"
          focus="true"
          disabled="{{useWechatInfo}}"
        />
        
        <!-- Availability indicator -->
        <view wx:if="{{nickname}}" class="availability-indicator">
          <view wx:if="{{checkingAvailability}}" class="checking">
            <text class="checking-text">Checking availability...</text>
          </view>
          <view wx:elif="{{nicknameAvailable === true}}" class="available">
            <text class="available-text">âœ“ Available</text>
          </view>
          <view wx:elif="{{nicknameAvailable === false}}" class="unavailable">
            <text class="unavailable-text">âœ— Already taken</text>
          </view>
        </view>
      </view>
      
      <!-- Gender Selection -->
      <view class="gender-section">
        <text class="gender-title">Gender</text>
        <view class="gender-selector">
          <picker 
            bindchange="onGenderChange" 
            value="{{genderIndex}}" 
            range="{{['Male', 'Female']}}"
          >
            <view class="gender-picker">
              <text class="gender-text">{{gender === 'male' ? 'Male' : 'Female'}}</text>
              <view class="picker-arrow"></view>
            </view>
          </picker>
        </view>
      </view>
      
      <view class="registration-actions">
        <button 
          bindtap="handleRegister" 
          class="register-btn" 
          type="primary"
          loading="{{isLoading}}"
        >
          Complete Registration
        </button>
      </view>
      
      <view class="note">
        <text>You can change your nickname anytime in your profile settings.</text>
      </view>
    </view>
  </view>
</view>

.test-cloud-btn::after {
  border: none;
}

.test-scenarios-btn {
  width: 100%;
  height: 36px;
  margin-top: 8px;
  background-color: #5856D6 !important;
  border-color: #5856D6 !important;
  color: #fff !important;
  font-size: 12px;
  border-radius: 6px;
}

.test-scenarios-btn::after {
  border: none;
}